patch-package
--- a/node_modules/electron-notarize/lib/index.d.ts
+++ b/node_modules/electron-notarize/lib/index.d.ts
@@ -6,14 +6,17 @@ export interface NotarizeAppOptions {
     appPath: string;
     appBundleId: string;
 }
+export interface TransporterOptions {
+    ascProvider: string;
+}
 export interface NotarizeResult {
     uuid: string;
 }
-export declare type NotarizeStartOptions = NotarizeAppOptions & NotarizeCredentials;
+export declare type NotarizeStartOptions = NotarizeAppOptions & NotarizeCredentials & TransporterOptions;
 export declare type NotarizeWaitOptions = NotarizeResult & NotarizeCredentials;
 export declare type NotarizeStapleOptions = Pick<NotarizeAppOptions, 'appPath'>;
 export declare type NotarizeOptions = NotarizeStartOptions;
 export declare function startNotarize(opts: NotarizeStartOptions): Promise<NotarizeResult>;
 export declare function waitForNotarize(opts: NotarizeWaitOptions): Promise<void>;
 export declare function stapleApp(opts: NotarizeStapleOptions): Promise<void>;
-export declare function notarize({ appBundleId, appPath, appleId, appleIdPassword, }: NotarizeOptions): Promise<void>;
+export declare function notarize({ appBundleId, appPath, appleId, appleIdPassword, ascProvider, }: NotarizeOptions): Promise<void>;
--- a/node_modules/electron-notarize/lib/index.js
+++ b/node_modules/electron-notarize/lib/index.js
@@ -47,7 +47,7 @@ function startNotarize(opts) {
                 case 0:
                     d('starting notarize process for app:', opts.appPath);
                     return [4 /*yield*/, helpers_1.withTempDir(function (dir) { return __awaiter(_this, void 0, void 0, function () {
-                            var zipPath, zipResult, result, uuidMatch;
+                            var zipPath, zipResult, notarizeStartOpts, result, uuidMatch;
                             return __generator(this, function (_a) {
                                 switch (_a.label) {
                                     case 0:
@@ -67,18 +67,22 @@ function startNotarize(opts) {
                                             throw new Error("Failed to zip application, exited with code: " + zipResult.code + "\n\n" + zipResult.output);
                                         }
                                         d('zip succeeded, attempting to upload to apple');
-                                        return [4 /*yield*/, spawn_1.spawn('xcrun', [
-                                                'altool',
-                                                '--notarize-app',
-                                                '-f',
-                                                zipPath,
-                                                '--primary-bundle-id',
-                                                opts.appBundleId,
-                                                '-u',
-                                                helpers_1.makeSecret(opts.appleId),
-                                                '-p',
-                                                helpers_1.makeSecret(opts.appleIdPassword),
-                                            ])];
+                                        notarizeStartOpts = [
+                                            'altool',
+                                            '--notarize-app',
+                                            '-f',
+                                            zipPath,
+                                            '--primary-bundle-id',
+                                            opts.appBundleId,
+                                            '-u',
+                                            helpers_1.makeSecret(opts.appleId),
+                                            '-p',
+                                            helpers_1.makeSecret(opts.appleIdPassword),
+                                        ];
+                                        if (opts.ascProvider !== '') {
+                                            notarizeStartOpts.push.apply(notarizeStartOpts, ['-asc_provider', opts.ascProvider]);
+                                        }
+                                        return [4 /*yield*/, spawn_1.spawn('xcrun', notarizeStartOpts)];
                                     case 2:
                                         result = _a.sent();
                                         if (result.code !== 0) {
@@ -174,25 +178,26 @@ function stapleApp(opts) {
 }
 exports.stapleApp = stapleApp;
 function notarize(_a) {
-    var appBundleId = _a.appBundleId, appPath = _a.appPath, appleId = _a.appleId, appleIdPassword = _a.appleIdPassword;
+    var appBundleId = _a.appBundleId, appPath = _a.appPath, appleId = _a.appleId, appleIdPassword = _a.appleIdPassword, _b = _a.ascProvider, ascProvider = _b === void 0 ? '' : _b;
     return __awaiter(this, void 0, void 0, function () {
         var uuid;
-        return __generator(this, function (_b) {
-            switch (_b.label) {
+        return __generator(this, function (_c) {
+            switch (_c.label) {
                 case 0: return [4 /*yield*/, startNotarize({
                         appBundleId: appBundleId,
                         appPath: appPath,
                         appleId: appleId,
                         appleIdPassword: appleIdPassword,
+                        ascProvider: ascProvider,
                     })];
                 case 1:
-                    uuid = (_b.sent()).uuid;
+                    uuid = (_c.sent()).uuid;
                     return [4 /*yield*/, waitForNotarize({ uuid: uuid, appleId: appleId, appleIdPassword: appleIdPassword })];
                 case 2:
-                    _b.sent();
+                    _c.sent();
                     return [4 /*yield*/, stapleApp({ appPath: appPath })];
                 case 3:
-                    _b.sent();
+                    _c.sent();
                     return [2 /*return*/];
             }
         });
--- a/node_modules/electron-notarize/lib/index.js.map
+++ b/node_modules/electron-notarize/lib/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"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"}
